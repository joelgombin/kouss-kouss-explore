{
  "schemaVersion": 2,
  "dockerfileLines": [
    "FROM node:18-alpine",
    "RUN apk add --no-cache python3 make g++ sqlite",
    "WORKDIR /usr/src/app",
    "COPY package*.json ./",
    "RUN npm ci",
    "COPY . .",
    "RUN npm run build",
    "RUN npm prune --production",
    "RUN npm rebuild better-sqlite3",
    "RUN mkdir -p /app/data",
    "EXPOSE 3000",
    "CMD [\"npm\", \"start\"]"
  ]
}
